@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml
left to right direction
LAYOUT_WITH_LEGEND()

Person(user, "User")

System_Boundary(k8s, "k8s") {
    Container(dbmail_imap, "dbmail-imap", "Container")
    Container(dbmail_lmtp, "dbmail-lmtp", "Container")
    Container(dbmail_postfix, "dbmail-postfix", "Container")
    ContainerDb(dbmail_db, "dbmail", "Postgres")
}

Rel(user, dbmail_imap, "imap:143")
Rel(user, dbmail_imap, "imap:993")
Rel(user, dbmail_postfix, "smtp:25")
Rel(dbmail_imap, dbmail_db, "tcp:5432")
Rel_L(dbmail_lmtp, dbmail_db, "tcp:5432")
Rel(dbmail_postfix, dbmail_db, "tcp:5432")
Rel(dbmail_postfix, dbmail_lmtp, "lmtp:24")

@enduml
